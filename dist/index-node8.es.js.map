{"version":3,"file":"index-node8.es.js","sources":["../src/index.js"],"sourcesContent":["/* eslint-disable flowtype/no-weak-types */\n\ntype Resolve = (result: any) => void;\ntype Reject = (result: any) => void;\n\ntype NodeStyleCallback = (err: any, result: any) => any;\ntype PromiseCallbackCallback = (done: NodeStyleCallback) => any;\n\n/**\n * Creates a callback that resolve or reject a promise\n * according to the default callback convention in node: (err, result)\n *\n * @param {Function} resolve resolve function of the promise\n * @param {Function} reject reject function of the promise\n * @return {Function}\n */\nexport function resolveFromCallback(resolve: Resolve, reject: Reject): NodeStyleCallback {\n  return (err: any, result: any) => {\n    if (err) {\n      if (typeof err === 'string') {\n        err = new Error(err);\n      }\n\n      return reject(err);\n    }\n\n    resolve(result);\n  };\n}\n\n/**\n * Returns a promise\n *\n * The first argument is a callback with a done node-style callback\n *\n * @example\n * import promiseCallback from 'promise-callback-factory';\n * promiseCallback(done => fs.readFile('./myFile.txt', done))\n *   .then((txtContentBuffer) => {\n *     console.log(txtContentBuffer.toString());\n *   });\n *\n * @param {Function} callback callback((done) => {})\n * @return {Promise}\n */\nexport default function promiseCallback(callback: PromiseCallbackCallback): Promise<any> {\n  return new Promise((resolve: Resolve, reject: Reject) => {\n    callback(resolveFromCallback(resolve, reject));\n  });\n}\n"],"names":["resolveFromCallback","resolve","reject","err","result","Error","promiseCallback","callback","Promise"],"mappings":"AAQA;;;;;;;;;;AAQA,AAAO,SAASA,mBAAT,CAA6BC,OAA7B,EAA+CC,MAA/C,EAAkF;SAChF,CAACC,GAAD,EAAWC,MAAX,KAA2B;QAC5BD,GAAJ,EAAS;UACH,OAAOA,GAAP,KAAe,QAAnB,EAA6B;cACrB,IAAIE,KAAJ,CAAUF,GAAV,CAAN;;;aAGKD,OAAOC,GAAP,CAAP;;;YAGMC,MAAR;GATF;;;;;;;;;;;;;;;;;;AA4BF,AAAe,SAASE,eAAT,CAAyBC,QAAzB,EAA0E;SAChF,IAAIC,OAAJ,CAAY,CAACP,OAAD,EAAmBC,MAAnB,KAAsC;aAC9CF,oBAAoBC,OAApB,EAA6BC,MAA7B,CAAT;GADK,CAAP;;;;;;"}